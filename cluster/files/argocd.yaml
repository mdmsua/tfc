global:
  domain: argocd.dmmo.io

dex:
  enabled: false

notifications:
  enabled: false

redis-ha:
  enabled: true

controller:
  podLabels:
    azure.workload.identity/use: "true"
  serviceAccount:
    annotations:
      azure.workload.identity/client-id: "${controller_client_id}"

repoServer:
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
  podLabels:
    azure.workload.identity/use: "true"
  serviceAccount:
    annotations:
      azure.workload.identity/client-id: "${repo_server_client_id}"

server:
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
  podLabels:
    azure.workload.identity/use: "true"
  serviceAccount:
    annotations:
      azure.workload.identity/client-id: "${server_client_id}"
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/ssl-passthrough: "true"
    tls: true

applicationSet:
  podLabels:
    azure.workload.identity/use: "true"
  serviceAccount:
    annotations:
      azure.workload.identity/client-id: "${applicationset_client_id}"

configs:
  oidc.config: |
    name: Azure
    issuer: https://login.microsoftonline.com/{oidc_tenant_id}/v2.0
    clientID: {oidc_client_id}
    azure:
      useWorkloadIdentity: true
    requestedIDTokenClaims:
      groups:
          essential: true
          value: "SecurityGroup"
    requestedScopes:
      - openid
      - profile
      - email
  secret:
    argocdServerAdminPassword: {server_admin_password}
